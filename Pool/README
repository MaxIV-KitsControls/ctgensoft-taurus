-------------------------------
Pool README file
-------------------------------

1 Compilation & installation

  This chapter describes the necessary steps for a sardana compilation

  all <install dir> references below refer to the desired installation directory.
  all <omni root> references below refer to OMNI_ROOT directory
  all <tango root> references below refer to TANGO_ROOT directory

  The following instructions describe the necessary steps for installing the
  entire Pool system including some generic controllers.
  If you don't need to install the pool and just want to install the controllers
  please follow the instructions under ctrls/README.

1.1 Prerequisites

  - libltdl >= 1.55 with header files (development distribution) *
  - omniORB >= 4.1.0 with header files (development distribution)
  - Tango >= 6.0.0 with header files (development distribution)
  - PyTango >= 3.0.4
  - libhkl - (optional) necessary for diffractometer controller. See Appendix A 
             at the end on how to get, build and install hkl on your system

 *libltdl was tested with version 1.55.22. No guarantees are made when using 
  other (older) versions. Feedback is welcome if tests are done with other 
  versions.

1.2 Compile and install
  
  Go to the Pool root directory and type:

  % mkdir build
  % cd build
  % ../configure
    
    - if compiling in debug mode provide:
        CXXFLAGS='-g -gstabs+ -O0'
    
    - if not system installation provide: 
        --prefix=<install dir>
        
    - if OMNI_ROOT environment variable is not present provide: 
        --with-omni-prefix=<omni root>
        
    - if TANGO_ROOT environment variable is not present provide: 
        --with-tango-prefix=<tango root>

    - if using an alternative python distribution provide:
        --with-python-prefix=<python root>
                
    - if no need for extra controllers provide: 
    	-enable-extra-ctrls=no [default=yes] or
    	-disable-extra-ctrls
    	
      this will avoid building and distributing the standard C++ and 
      Python controllers
      
    - if compiling the controller 'diffractometer':
      this controller needs the HKL library provided by SOLEIL. Therefore:
      
      - if HKL_ROOT environment variable is not present provide: 
        --with-hkl_prefix=<hkl root>
        
        Note: if no valid HKL library is found the compilation will succeed but
        the diffractometer controller will not be build.

  % make
  % sudo make install

2. Execution

  To configure and start a new Pool system please look into the 
  doc/ConfigUserGuide.lyx under section 3.  

-----------------------
Appendix A: HKL library 
-----------------------

The HKL available from http://repo.or.cz/r/hkl.git.
It has been developed by the SOLEIL synchrotron.
The contact person is PICCA Frédéric-Emmanuel: frederic-emmanuel.picca .at. synchrotron-soleil.fr

To checkout and build (you need the 'git' tool and 'scons'):
 % git clone http://repo.or.cz/r/hkl.git
 % cd hkl
 % scons

In order to set a VALID HKL_ROOT (or --with-hkl-prefix) to build sardana, you 
need to make a symbolic link to the build result directory of hkl called 'lib'.
If you install the library on the system, the step above is, of course, 
unnecessary.

Example:
 - suppose you have checked out HKL into /home/bart/workspace
 - you are on linux with bash
 
 % cd hkl
 % scons
   (this will build scons in debug mode)
 % ln -s debug/linux2/src lib
 % export HKL_ROOT=/home/bart/workspace/hkl
